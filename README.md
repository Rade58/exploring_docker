# SPECIFYING A WORKING DIRECTORY

JA SADA ZELIM DA OTVORIM DOCKER SHELL

NAIME ELI MDA START-UJEM UP CONTAINER TAKO DA MOGU DA UPRAVLJAM SHELL-OM U RUNNING CONTAINERU

***

AKO IMAS RUNNING CONTAINER IZ PREDHODNOG BRANCH-A, NJEGA NARAVNO ZAUSTAVI/UNISTI

***

ZASTO ZELIM SHELL? PA ZELIM DA ODRADIM ODREDJENI DEBUGGING INSIDE OF IT

AKO SI ZABORAVIO, TI CES OTVARANJEM SHELL-A OVERRIDE-OVATI STARTUP COMMAND (DODAJEM `sh`)

- `docker run -it radebajic/webapp sh`

STO ZNACI DA SE NECE STARTOVATI NODJS SERVER, JER TO JE BILA STARTUP KOMANDA

ZATO NISAM SPECIFICIRAO NI PORT MAPPING

JER SAMO ZELIM DA IMAM PRISTUP FILE-OVIMA IFOLDERIMA FILESYSTEMA CONTAINER-A

SAD SAM U SHELL-U CONTAINER-A

```shell
/ # ls
Dockerfile         etc                lib                node_modules       package.json       run                sys                var
bin                home               media              opt                proc               sbin               tmp
dev                index.js           mnt                package-lock.json  root               srv                usr
/ # 

```

DAKLE KADA SI ISSUEOVAO COPY INSTRUKCIJU U PROSLOM BRANCH-U (SPECIFICIRAO TO U DOCKERFILE-U), TI SI index.js package.json package.lock.json USTVARI KOPIRAO U ROOT DIRECTORY CONTAINER-OVOG FILESYSTEMA

ZBOG INSTLACIJA GENERISANI SU I node_modules

**OVO NIJE BEST PRZTICE, PROJEKAT JE TREBAO DA BUDE U ITS OWN FOLDERU**

MOZES IATI NSTO STO JE CONFLICTING, PA SI MOGAO LAKO OVERWRITE-OVATI NESTO STO DOLAZI SA FILESYSTEMOM, NEKI IMPORTAND FILE ILI FOLDER

**A PREVAZIDJEM OVO, KORISTICU OPET INSTRUKCIJU U DOCKER FILE-U, KOJA JE SPECIFICNA BAS ZA OVAJ PROBLEM**

# DEFINISACU `WORKDIR` INSTRUKCIJU U `Dockerfile`-U

OVO MORA DA SE DEFINISE NARAVNO PRE COPY INSTRUKCIJE, I SAM ZNAS ZASTO

- `code webapp/Dockerfile`

DODAJEM `WORDIR` INSTRUKCIJU

```dockerfile

# Specify a base image
FROM node:lts-alpine3.10

# OVDE DODAJEM WORKDIR CONTAINERA
# I U TAJ WORKDIR CE BITI KOPIRANO ONO
# DEFINISANO COPY INSTRUKCIJOM
# JA SAM STAVIO webapp IAKO JE PRAKASA DA SE STAVI app
# NIJE NI BITNO
# ISTO TAKO, OBICNO SE NODE APP STAVLJA U usr FOLDER
# JER JE TU NAJSIGURNIJE, NEMA NISTA STO JE DEO FILESYSTEMA, A
# STA BI MOGLO BITI IVERWRITEN
WORKDIR /usr/webapp

COPY ./ ./

# Install some dependancies
RUN npm install

# Default command
CMD ["npm", "start"]
```

**ALI BENEFIT NIJE SAMO KOPIRANJE**

**VEC ANY FOLLOWING COMMAND CE BITI EXECUTED RELATIVE TO THAT DIRECTORY**

**AKO DIREKTORIJUM KOJI SI SPECIFICIRAO NE POSTOJI U FILESYSTEMU CONTAINERA, BICE CREATED**

# POSTO SMO MENJALI DOCKERFILE, MORAMO DA REBUILD-UJEMO IMAGE

- `cd webapp`

- `docker build -t radebajic/webapp .`

# SADA MOZEMO DA OD IMAGE-A INSTATICIZIRAMO CONTAINER 