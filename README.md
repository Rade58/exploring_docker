# MANUAL IMAGE GENERATION WITH DOCKER COMMIT

OVO NECES CESTO RADITI, ALI DOBRO JE DA ZNAS DA TO MOZES RADITI

SADA CES MANELNO RADITI STA JE TVOJ DOCKER FILE RADIO KADA SI GA RUNN-OVAO

USTVARI TI CES SADA RADITI OBRNUT PROCES GDE CES OD CONTAINER-A GENERISATI IMAGE

# POKRECEM SADA CONTAINER, KREIRAN OD `alpine` BASE IMAGE, UZ TO DA CU OSTVARITI KONEKCIJU SA CONTAINER-OVIM SHELL-OM

OTVARAM TERMINAL I INSTATICIZIRAM CONTAINER OD `alpine` IMAGE-A

- `docker run -it alpine sh`

```
#

```

AKLE BICE MI OTVOREN COMMAAND PROMPT I PRVO STA CU OBAVITI JESTE MANUELNA INSTLACIJA REDISA

```c
# apk add --update redis 
```

```c
/ # apk add --update redis
fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
(1/1) Installing redis (6.0.11-r0)
Executing redis-6.0.11-r0.pre-install
Executing redis-6.0.11-r0.post-install
Executing busybox-1.32.1-r3.trigger
OK: 8 MiB in 15 packages
/ # 
```

DAAKLE TI SADA IMAS RUNNING CONTAINER, KOJEM SI MODIFIKOVAO FILESYSTEM

A FILESYSTEM JE DOBIO REDIS JER SAM GA INSTALIRAO

**OTVORICU SECOND TERMINAL WINDOW, I TU CU RUNN-OVATI DOCKER CLI, KOJ ICE TAKE-OVATI SNAPSHOT FILESYSTEM-A RUNNING CONTAINER-A, I ASSIGN-OVACE DEFAULT COMMAND TO IT, I GENERISACE CE IMAGE OUT OF ENTIRE THING**

UZIMAM ID RUNNING CONTAINER-A

- `docker ps`

```c
CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS         PORTS     NAMES
9746d79ca762   alpine    "sh"      6 minutes ago   Up 6 minutes             quirky_mestorf

```

# I RUNN-UJEM SLEDECU KOMANDU, A TO JE `docker commit`

- `docker commit -c 'CMD ["redis-server"]' 9746d79ca762`

KAO OUTPUT DOBIJAS NEKI ID

```c
sha256:070c032152dee9d6adf2d462755b98588a5eeab03e1716f5795f83e29e4024a4
```

TI NE MORAS KOPIRATI CEO OVAJ ID, KAO INACE S SVIM ID-JEVIMA

JER DOCKER TI TO DOZVOLJAVA, JER KADA PASS-UJES SAMO FIRST PART ON CE ZNATI DA SE RADI O PRAVOM ID-JU

JA CU UZETI PRVI SEGMENT GORNJEG ID-JA, KAKO BI USTVARI POKRETANJEM POKRENUO NOVI CONTAINER SA STARTUP-OVANIM REDISOM

- `docker run 070c032152dee`

I VIDIM DA JE REDIS SERVER OPERATIONAL

## GENERALNO SE OVA PRAKSA NE KORISTI

KORISTI SE DOCKERFILE