# BUILD PROCESS IN DETAIL

DAKLE JA SAM RANIJE KREIRAO Dockerfile

- `cat redis-image/Dockerfile`

```dockerfile
# Koristi existing docker image as a base
FROM alpine

# Download and install a dependancy
RUN apk add --update redis


# Reci iamge-u sta da radi when it starts
# as a container
CMD ["redis-server"]
```

ZATIM SAM POKRENUO BUILD KOMANDU U FOLDERU KOJEM JE TAJ DOCKERFILE (KOMANDA JE BILA `cd redis-image` `docker build .`)

**ONO STO ZELIM DA URADIM JESTE DA SAZNAM STA SE TO SVE OCCURE-OVALO ON MY TERMINAL, KADA SAM EXECUTE-OVAO, POOMENUTU BUILD KOMANDU**

WALK-OVACU THROUGH EACH STEP KOJI JE PREDSTAVLJEN U DOCKERFILE-U, A ONO STO CU TADA ANALIZIRATI JE EFEKAT KOJI SU TE INSTRUKCIJE IMALE NA IMAGE KOJI SAM GRAIO

# ZELIM SADA DA GOVORIM O OUTPUT-U, KOJI SE DESIO PO RUNNING-U KOMANDE

POSTO SAM ZAUSTAVIO CONTAINER I CLEAR-OVAO TERMINAL, OPERT CU RUNN-OVATI ISTU KOMANDU, CIME CU OPET BUILD-OVATI IMAGE I TO CE BITI NOVI IMAGE

- `cd redis-image` `docker build .`

OVO JE OUTPUT PRIIIKOM BUILD-A

```c
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM alpine
 ---> 28f6e2705743
Step 2/3 : RUN apk add --update redis
 ---> Running in 009fbddb6ef9
fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
(1/1) Installing redis (6.0.11-r0)
Executing redis-6.0.11-r0.pre-install
Executing redis-6.0.11-r0.post-install
Executing busybox-1.32.1-r3.trigger
OK: 8 MiB in 15 packages
Removing intermediate container 009fbddb6ef9
 ---> 29d1fed4dd6e
Step 3/3 : CMD ["redis-server"]
 ---> Running in 43944161fcbe
Removing intermediate container 43944161fcbe
 ---> 48804c2d733a
Successfully built 48804c2d733a
```

***

IMAGE JE IZGRADJED, I IMAM NJEGOV ID (TO NEMOJ DA MESAS SA ID-JEM CONTAINERA KOJI BI SE PRAVIO OD IMAGE-A)

OVO JE DAKLE ID KOJI KORISTIM KAKO BI INSTATICIZIRAO CONTAINER, OD IMAGE-A, U BUDUCNOSTI

MOZDA SAM TO VEC I REKAO

***

KADA SAM POKRENUO POMENUTU KOMANDU JA SAM USTVARI DAO DOCKER FILE, DOCKER CLI-U

TACKA `.` U KOMANDI JE ZNACILA BUILD CONTEXT; A SET OF FILES AND FOLDERS THAT BELONG TO OUR PROJECT, FILE-OVI KOJE ZELIM DA ENCAPSULATE-UJEM, U CONTAINER, KADA SE ON BUDE INSTATICIZIRAO (VIDECES NEK ISLEDECI PUT BOLJE EXAMPLOVE POMENUTOGA)

**AKO POGLEDAS GORNJI OUTPUT, MOZES SHVATITI DA ZA SVAKI INE KOJ ISI STAVIO U KONFIGURATION FILE, TI IMAS STEP U TOM OUTPUTU U TERMINALU**

RANIJE KADA SI PRVI PUT KORISTIO BASE IMAGE alpine ON JE BIO DOWNLOADED, A SADA JE UZET IZ CACHE-A, STO ZNACI DA OVOG PUTA NIJE SE ISLO NA REACHING U DOCKER HUB

U STEPU 2 STVARI POSTAJU NESTO INTERESANTNIJE

ONO STO SE TADA PRAVI JESTE INTERMEDIATE CONTAINER, KOJI CE BITI KASNIJE I UKLONJEN (OBJASNICU KASNIJE STA JE INTRMEDIATE CONTAINER)

VIDIS DA SE INTERMEDIATE CONTAINER, UNISTAVA NAKON TRECEG KORAKA

USTVARI INTERMEDIATE CONTAINERI CE SE PRAVITI ZA SVAKO OD KORAKA, OSIM ONOG PRVOG A TO JE KORISCENJE BASE IMAGE-A

## AUTOR WORKSHOPA JE INTERMEDIATE CONTAINERS OBJASNIO DOBRO PREKO DIJAGRMA

ZATO AKO TE TO OPET ZANIMA, POGLEDAJ 24-31 VIDEO

U PITANJU JE TEMP CONTAINER, KOJI U SUSTINA OPBAVLJA NEKU INSTRUKCIJU KOJU SAM JA DAO KROZ DOCKER FILE, PA ONDA BIVA UNISTEN, I TAKO ZA VAKU OD OPERACIJA ZA KOJE JE TO POTREBNO

TAKO DA JE TAJ CONTAINER DOWNLOAD-OVAO I INSTALIRAO REDIS U FILE SYSTEM, PRE NEGO STO JE UNISTEN (KADA KAZEM FS, MISLIM NA FS SNAPSHOT)

SVE DRUGO MOZES VIDETI IZ VIDEA I DIJAGRAMA